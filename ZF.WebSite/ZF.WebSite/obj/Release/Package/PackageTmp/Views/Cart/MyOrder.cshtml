
@{
    ViewBag.Title = "我的订单";
    Layout = null;
}
<link href="@HttpContext.Current.Application["DefuleDomain"]/Libs/CourseInfo/css/course_talk.css" rel="stylesheet" />
<link href="@HttpContext.Current.Application["DefuleDomain"]/Libs/CourseInfo/css/core.css" rel="stylesheet" />
<link href="@HttpContext.Current.Application["DefuleDomain"]/Libs/CourseInfo/css/course_list.css" rel="stylesheet" />
<link href="@HttpContext.Current.Application["DefuleDomain"]/Libs/CourseInfo/css/course_note.css" rel="stylesheet" />
<link href="@HttpContext.Current.Application["DefuleDomain"]/Libs/CourseInfo/css/course_noteIndex.css" rel="stylesheet" />
<link href="@HttpContext.Current.Application["DefuleDomain"]/Libs/CourseInfo/css/course_reply.css" rel="stylesheet" />
<link href="@HttpContext.Current.Application["DefuleDomain"]/Views/Shared/_Layout2Style.css" rel="stylesheet" />
<script src="@HttpContext.Current.Application["DefuleDomain"]/Js/jquery-2.2.3.min.js"></script>
<script src="@HttpContext.Current.Application["DefuleDomain"]/Libs/CourseInfo/js/ajax.js"></script>
<script src="@HttpContext.Current.Application["DefuleDomain"]/Libs/CourseInfo/js/vue.min.js"></script>
<script src="@HttpContext.Current.Application["DefuleDomain"]/Libs/CourseInfo/js/reuglar.0.3.1.js"></script>
<script src="@HttpContext.Current.Application["DefuleDomain"]/Js/jquery.cookie.js"></script>
<script src="@HttpContext.Current.Application["DefuleDomain"]/Js/template.js"></script>
<script src="@HttpContext.Current.Application["DefuleDomain"]/Libs/layer/js/layer.js"></script>
<script src="@HttpContext.Current.Application["DefuleDomain"]/Js/base.js"></script>
<title></title>
<link href="@HttpContext.Current.Application["DefuleDomain"]/Views/Cart/css/MyOrder.css" rel="stylesheet" />
<link href="@HttpContext.Current.Application["DefuleDomain"]/Libs/zui/css/zui.lite.css" rel="stylesheet" />
<link href="@HttpContext.Current.Application["DefuleDomain"]/Libs/pagination/pagination.css" rel="stylesheet" />
<style>
    body {
        overflow: hidden;
    }
    .m-myOrder .m-data-lists .u-OrderCard {
        margin: 0px;
    }

    .j-left-info {
        padding: 5px;
    }

    .m-myOrder .m-data-lists .u-OrderCard .info {
        background: #ea644a;
        color: #333;
        margin-top: 15px;
        padding: 5px;
    }

    .m-myOrder .u-mounav .order-status .j-tab {
        border-bottom: 4px solid #fff;
    }

    .ui-pager div * {
        height: 40px;
        line-height: 20px;
        vertical-align: middle;
    }

    .m-style a {
        float: left;
        margin: 0 5px;
        width: 38px;
        height: 38px;
        line-height: 38px;
        background: #fff;
        border: 1px solid #ebebeb;
        color: #bdbdbd;
        font-size: 14px;
        text-decoration:none;
    }

    .m-style .next, .m-style .prev {
        font-family: "Simsun";
        font-size: 14px;
        font-weight: bold;
    }
</style>
<div class="m-myOrder" id="j-my-orders">
    <div class="m-myOrders f-cb">
        <div class="u-mounav f-cb f-bg">
            <div class="g-flow">
                <h3 class="j-tabtxt">我的订单</h3>
                <div class="f-cb order-status j-order-status">
                    <a class="f-fl tab f-pr j-tab current" id="orderAll" name="">全部订单</a>
                    <a class="f-fl tab f-pr j-tab" id="pendingPayment" name="1">待支付</a>
                    <a class="f-fl tab f-pr j-tab" id="tradingSuccess" name="0">交易成功</a>
                    <a class="f-fl tab f-pr j-tab" id="tradingClose" name="2,3">交易关闭</a>
                </div>
            </div>
        </div>
        <div class="g-flow">
            <div class="f-cb f-bg header j-header" style="display: block;" id="tdTitle">
                <span class="header-item first">订单信息</span>
                <span class="header-item">单价(元)</span>
                <span class="header-item">课程金额(元)</span>
                <span class="header-item">交易状态</span>
                <span class="header-item">总金额</span>
                <span class="header-item last">操作</span>
            </div>
            <div class="orderCon">
                <div class="j-ordersList f-cb listWrap auto-1523169589007-parent" id="isInfo" style="display: block;">
                    <div class="m-basepool f-cb auto-1523169589007" id="auto-id-1523169589353">
                        <div class="m-data-lists f-cb f-pr j-data-list" id="orderList" style="">
                        </div>
                        <div class="ui-pager auto-1523673907122-parent" id="j-pager">
                            <div class="m-style M-box1" style="float: right;"></div>
                        </div>
                    </div>
                </div>
                <div class="j-empty u-emptybig" id="isNoInfo">
                    <div class="j-emptytxt emptytext">
                        <p>暂时还没有该状态的订单</p>
                        <p class="yq">
                            去
                            <a href="#" target="_blank">
                                全部课程
                            </a>页面学习喜欢的课程吧~
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script id="orderList_html" type="text/html">
        {{if Records>0}}
        {{each Rows}}
        {{if $value.sheetmodelpagedetailoutput.length>1}}
        <div id="auto-id-1523411859880" class="first">
            <div class="u-OrderCard">
                <div class="info">
                    <span class="orderTime">{{$value.AddTime}}</span>
                    <span>订单号：{{$value.OrderNo}}</span>
                </div>
                <div class="cont f-bg f-cb">
                    <div class="f-fl left-info j-left-info order-left-info">
                        {{each $value.sheetmodelpagedetailoutput}}
                        <div class="sub-order">
                            <div>购买数量：{{$value.Num}}</div>
                        </div>
                        <div class="sub-order-con j-sub-order-con f-cb order-sub-order-con">
                            <div class="f-fl col1">
                                {{if $value.CourseType==0}}
                                <a href="/CourseInfo/CourseInfo?courseId={{$value.CourseId}}" target="_blank"><h6 class="f-f0 title f-thide" title="{{$value.CourseName}}">{{$value.CourseName}}</h6></a>
                                {{else if $value.CourseType==1}}
                                <a href="/CourseInfo/CoursePackInfo?courseId={{$value.CourseId}}" target="_blank"><h6 class="f-f0 title f-thide" title="{{$value.CourseName}}">{{$value.CourseName}}</h6></a>
                                {{else if $value.CourseType==2}}
                                <a href="/FaceToFace/Index?courseId={{$value.CourseId}}" target="_blank"><h6 class="f-f0 title f-thide" title="{{$value.CourseName}}">{{$value.CourseName}}</h6></a>
                                {{/if}}
                                <p class="red">
                                    有效天数：
                                    {{ if $value.ValidityPeriod==0}}
                                    永久有效
                                    {{/if}}
                                    {{ if $value.ValidityPeriod>0}}
                                    {{$value.ValidityPeriod}}
                                    {{/if}}
                                </p>
                            </div>
                            <div class="f-fl ">
                                <p class="price-alone">{{$value.FavourablePrice}}</p>
                            </div>
                            <div class="f-fl">
                                <span class="pay-price">{{$value.Amount}}</span>
                            </div>
                            @*<div class="f-fl oper">
                                </div>*@
                        </div>

                        {{/each}}
                    </div>
                    <div class="f-fl right-info">
                        <div class="f-fl status j-status" style="line-height: 285px;">
                            <span>{{$value.StateVal}}</span>
                        </div>
                        <div class="f-fl oper j-oper" style="width: 150px; line-height: 285px; margin-top: 1px;">
                            {{$value.OrderAmount}}
                        </div>
                        <div class="f-fl oper j-oper" style="margin-top: 126px;">
                            {{if $value.State==0}}
                            <a style="line-height: 45px; color: red;"  href="/Cart/OrderSheetDetail?OrderNo={{$value.OrderNo}}" target="_blank">订单详情</a>
                            {{/if}}
                            {{if $value.State==1}}
                            <a href="javascript:ToPayMent('{{$value.OrderNo}}')" target="_blank"><span class="f-cb go-pay" id="auto-id-1523411859886">去付款</span></a>
                            <a><span class="f-cb j-cancelOrder" onclick="OrderCancel(this)" id="{{$value.OrderNo}}">取消订单</span></a>
                            <a style="line-height: 45px; color: red;" href="/Cart/OrderSheetDetail?OrderNo={{$value.OrderNo}}" target="_blank">订单详情</a>
                            {{/if}}
                            {{if $value.State==2 || $value.State==3}}
                            @*<a target="_blank" href="#"><span class="f-cb go-pay" id="auto-id-1523411859886">交易失败</span></a>*@
                            <a style="line-height: 45px; color: red;"><span class="f-cb j-cancelOrder" onclick="DelOrder(this)" id="{{$value.OrderNo}}">删除订单</span></a>
                            @*<a style="line-height: 45px; color: blue;"><span class="f-cb j-cancelOrder" onclick="ReOrder(this)" id="{{$value.OrderNo}}">重新下单</span></a>*@
                            <a style="line-height: 45px; color: red;" href="/Cart/OrderSheetDetail?OrderNo={{$value.OrderNo}}" target="_blank">订单详情</a>
                            {{/if}}
                            {{if $value.State==5}}
                            @*<a target="_blank" href="#"><span class="f-cb go-pay" id="auto-id-1523411859886">交易失败</span></a>*@
                            {{/if}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {{else}}
        <div id="auto-id-1523169589378" class="first">
            <div class="u-OrderCard">
                <div class="info">
                    <span class="orderTime">{{$value.AddTime}}</span>
                    <span>订单号：{{$value.OrderNo}}</span>
                </div>
                <div class="cont f-bg f-cb">
                    <div class="f-fl left-info j-left-info">
                        {{each $value.sheetmodelpagedetailoutput}}
                        <div class="sub-order">
                            <div>购买数量：{{$value.Num}}</div>
                        </div>
                        <div class="sub-order-con j-sub-order-con f-cb">
                            <div class="f-fl col1">
                                {{if $value.CourseType==0}}
                                <a href="/CourseInfo/CourseInfo?courseId={{$value.CourseId}}" target="_blank"><h6 class="f-f0 title f-thide" title="{{$value.CourseName}}">{{$value.CourseName}}</h6></a>
                                {{else if $value.CourseType==1}}
                                <a href="/CourseInfo/CoursePackInfo?courseId={{$value.CourseId}}" target="_blank"><h6 class="f-f0 title f-thide" title="{{$value.CourseName}}">{{$value.CourseName}}</h6></a>
                                {{else if $value.CourseType==2}}
                                <a href="/FaceToFace/Index?courseId={{$value.CourseId}}" target="_blank"><h6 class="f-f0 title f-thide" title="{{$value.CourseName}}">{{$value.CourseName}}</h6></a>
                                {{/if}}
                                <p class="red">
                                    有效天数：{{ if $value.ValidityPeriod==0}}
                                    永久有效
                                    {{/if}}
                                    {{ if $value.ValidityPeriod>0}}
                                    {{$value.ValidityPeriod}}
                                    {{/if}}
                                </p>
                            </div>
                            <div class="f-fl ">
                                <p class="price-alone">{{$value.FavourablePrice}}</p>
                            </div>
                            <div class="f-fl">
                                <span class="pay-price">{{$value.Amount}}</span>
                            </div>
                            @*<div class="f-fl oper">

                                </div>*@
                        </div>
                        {{/each}}
                    </div>
                    <div class="f-fl right-info">
                        <div class="f-fl status j-status" style="line-height: 124px;margin-left: 65px;">
                            <span>{{$value.StateVal}}</span>
                        </div>
                        <div class="f-fl oper" style="width: 150px;line-height: 123px;margin-top: 1px;">
                            {{$value.OrderAmount}}
                        </div>
                        <div class="f-fl oper j-oper" style="margin-top: 40px;">
                            {{if $value.State==0}}
                            <a style="line-height: 45px; color: red;" href="/Cart/OrderSheetDetail?OrderNo={{$value.OrderNo}}" target="_blank">订单详情</a>
                            {{/if}}
                            {{if $value.State==1}}
                            <a href="javascript:ToPayMent('{{$value.OrderNo}}')" target="_blank"><span class="f-cb go-pay" id="auto-id-1523411859886">去付款</span></a>
                            <a><span class="f-cb j-cancelOrder" onclick="OrderCancel(this)" id="{{$value.OrderNo}}">取消订单</span></a>
                            <a style="line-height: 45px; color: red;" href="/Cart/OrderSheetDetail?OrderNo={{$value.OrderNo}}" target="_blank">订单详情</a>
                            {{/if}}
                            {{if $value.State==2 || $value.State==3}}
                            @*<a target="_blank" href="#"><span class="f-cb go-pay" id="auto-id-1523411859886">交易失败</span></a>*@
                            <a style="line-height:45px;color:red;"><span class="f-cb j-cancelOrder" onclick="DelOrder(this)" id="{{$value.OrderNo}}">删除订单</span></a>
                            @*<a style="line-height:45px;color:blue;"><span class="f-cb j-cancelOrder" onclick="ReOrder(this)" id="{{$value.OrderNo}}">重新下单</span></a>*@
                            <a style="line-height: 45px; color: red;" href="/Cart/OrderSheetDetail?OrderNo={{$value.OrderNo}}" target="_blank">订单详情</a>
                            {{/if}}
                            {{if $value.State==5}}
                            @*<a target="_blank" href="#"><span class="f-cb go-pay" id="auto-id-1523411859886">交易失败</span></a>*@
                            {{/if}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {{/if}}
        {{/each}}
        {{/if}}
    </script>
    <input type="hidden" Id="Rows" value="3" />
    <input type="hidden" Id="PageIndex" value="1" />
</div>
<script src="@HttpContext.Current.Application["DefuleDomain"]/Libs/pagination/jquery.pagination.js"></script>
<script src="@HttpContext.Current.Application["DefuleDomain"]/Libs/zui/js/zui.js"></script>
<script src="@HttpContext.Current.Application["DefuleDomain"]/Libs/layer/js/layer.js"></script>
<script src="@HttpContext.Current.Application["DefuleDomain"]/Views/Cart/MyOrder.js"></script>